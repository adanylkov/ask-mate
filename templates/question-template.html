<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title></title>
</head>

<body>
    <div class="question">
        {%- from "question.html" import show_question %}
        {{ show_question(question) }}
    </div>
    <div class="comments">
      {% for comment in comments %}
        {% if comment.question_id and not comment.answer_id %}
          <small>{{ comment.message }}</small><br>
          <small>{{ comment.submission_time }}</small>
          <form action="/comment/{{ comment.id }}/edit" method="get">
            <input type="submit" value="Edit comment">
          </form>
          <form action="/comment/{{ comment.id }}/delete" method="post">
            <input type="submit" value="Delete comment">
          </form>
          <br><br>
        {% endif %}
      {% endfor %}
    </div>
    {% if answers %}
    <div class="answers">
        <h2>Answers:</h2>
        {% for answer in answers %}
            <p>{{ answer['message'] }}</p>
            {% if answer['image'] %}
                {% set url=url_for('static', filename=answer['image']) %}
                <img src="{{ url }}" width="100">
                <br>
            {% endif %}
            <div>
              <form action="/answer/{{  answer['id'] }}/vote-up" method="post">
                <button type="submit">UP</button>
              </form>
                {{ answer['vote_number'] }}
              <form action="/answer/{{  answer['id'] }}/vote-down" method="post">
                <button type="submit">DOWN</button>
              </form>
            </div>
            <small>Posted on: {{ answer['submission_time'] }}</small><br>
            <form action="/answer/{{ answer['id'] }}/new-comment" method="get">
                <input type="submit" value="Add new comment to answer" />
            </form><br>
            <form action="/answer/{{ answer['id'] }}/delete" method="post">
                <input type="submit" value="Delete the answer" />
            </form><br>
            {% for comment in comments %}
              {% if comment.answer_id == answer.id %}
                <small>{{ comment.message }}</small><br>
                <small>{{ comment.submission_time }}</small>
                <br><br>
                <form action="/comment/{{ comment.id }}/edit" method="get">
                  <input type="submit" value="Edit comment">
                </form>
                <form action="/comment/{{ comment.id }}/delete" method="post">
                  <input type="submit" value="Delete comment">
                </form>
              {% endif %}
            {% endfor %}
          {% endfor %}
      </div>
    {% endif %}

    <br>


    <form action="/question/{{ question['id'] }}/new-answer">
        <input type="submit" value="Add new answer" />
    </form>

    <br>

    <form action="/list">
        <input type="submit" value="Return to home" />
    </form>


    <br>

    <form action="/question/{{ question['id'] }}/delete" method="post">
        <input type="submit" value="Delete a question" />
    </form>

    <br>

    <form action="/question/{{ question['id'] }}/edit">
        <input type="submit" value="Edit a question" />
    </form>

    <br>

    <form action="/question/{{ question['id'] }}/new-comment">
        <input type="submit" value="Add comment to question" />
    </form>

</body>

</html>
